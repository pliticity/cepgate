<div class="with-top-padding">
    <span us-spinner="{radius:30, width:8, length: 16}"></span>

    <form name="ctrl.modelForm" class="form-horizontal">

        <div class="row">

            <div class="col-xs-6">

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'classificationName'}">
                    <label class="col-xs-6 control-label">Classification Name</label>
                    <div class="col-xs-6">
                        <select ng-readonly="ctrl.readonly()==true" ng-change="ctrl.onClassificationSelected()"
                                name="classificationName"
                                ng-model="ctrl.model.classification.id"
                                class="form-control" required="">
                            <option ng-repeat="c in ctrl.classifications" value="{{c.id}}">{{c.name}}
                                ({{c.classificationId}})
                            </option>
                        </select>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'internalExternal'}">
                    <label class="col-xs-6 control-label">Internal/External</label>
                    <div class="col-xs-6">
                        <select ng-readonly="ctrl.readonly()==true" name="internalExternal" class="form-control"
                                ng-model="ctrl.model.kind" required="">
                            <option value="INTERNAL">Internal</option>
                            <option value="EXTERNAL">External</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'docType'}">
                    <label class="col-xs-6 control-label">Document Type</label>
                    <div class="col-xs-6">
                        <select ng-change="ctrl.onTypeSelected()" ng-readonly="ctrl.readonly() == true" name="docType"
                                ng-model="ctrl.model.docType.id"
                                class="form-control" required="">
                            <option ng-repeat="dt in ctrl.types" value="{{dt.id}}">{{dt.name}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'documentNumber'}">
                    <label class="col-xs-6 control-label">Document Number</label>
                    <div class="col-xs-6">
                        <input ng-readonly="ctrl.readonly()==true" class="form-control" name="documentNumber"
                               ng-model="ctrl.model.documentNumber" required=""/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'plannedIssueDate'}">
                    <label class="col-xs-6 control-label">Planned Issue Date</label>
                    <div class="col-xs-6">
                        <input ng-readonly="ctrl.readonly()==true" type="text" class="form-control"
                               ng-model="ctrl.model.plannedIssueDate"
                               name="plannedIssueDate" cg-date-picker=""/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'responsibleUser'}">
                    <label class="col-xs-6 control-label">Document Responsible</label>
                    <div class="col-xs-6">
                        <select ng-readonly="ctrl.readonly()==true" name="responsibleUser"
                                ng-model="ctrl.model.responsibleUser.id"
                                class="form-control" required="">
                            <option ng-repeat="u in ctrl.principals" value="{{u.id}}">{{u.email}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'documentName'}">
                    <label class="col-xs-6 control-label">Document Title</label>
                    <div class="col-xs-6">
                        <textarea ng-readonly="ctrl.readonly()==true" class="form-control" ng-maxlength="300"
                                  ng-model="ctrl.model.documentName"
                                  name="documentName" rows="3" cols="20" required=""/>
                    </div>
                </div>

            </div>


            <div class="col-xs-6">

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'classificationId'}">
                    <label class="col-xs-6 control-label">Classification Id</label>
                    <div class="col-xs-6">
                        <input ng-readonly="true" disabled name="classificationId" class="disabled form-control"
                               ng-model="ctrl.model.classification.classificationId"/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'securityGroup'}">
                    <label class="col-xs-6 control-label">Security Group</label>
                    <div class="col-xs-6">
                        <select ng-readonly="ctrl.readonly()==true" placeholder="Security Group" class="form-control"
                                name="securityGroup"
                                ng-model="ctrl.model.securityGroup" required="">
                            <option value="User">User</option>
                            <option value="Sales">Sales</option>
                            <option value="Management">Management</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'docTypeId'}">
                    <label class="col-xs-6 control-label">Document Type ID</label>
                    <div class="col-xs-6">
                        <input ng-readonly="true" disabled name="docTypeId" class="disabled form-control"
                               ng-model="ctrl.model.docType.typeId"/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'masterDocumentNumber'}">
                    <label class="col-xs-6 control-label">Master Document Number</label>
                    <div class="col-xs-6">
                        <input class="form-control disabled" ng-readonly="true" name="masterDocumentNumber"
                               ng-model="ctrl.model.masterDocumentNumber" required=""/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'creationDate'}">
                    <label class="col-xs-6 control-label">Document Creation Date</label>
                    <div class="col-xs-6">
                        <input type="text" ng-readonly="true" class="form-control disabled"
                               ng-model="ctrl.model.creationDate"
                               name="creationDate"
                               required=""/>
                    </div>
                </div>

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'createdBy'}">
                    <label class="col-xs-6 control-label">Created by</label>
                    <div class="col-xs-6">
                        <input class="form-control disabled" ng-readonly="true" name="createdBy"
                               ng-model="ctrl.model.createdBy.email"/>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-xs-6 control-label">Tags</label>
                    <div class="col-xs-6">
                        <tags-input ng-readonly="ctrl.readonly()==true" ng-model="ctrl.model.tags"
                                    name="tags"/>
                    </div>
                </div>

            </div>

        </div>

        <div class="row">
            <div class="col-xs-6">

                <div class="form-group" cg-validate="{form: ctrl.modelForm, field: 'provider'}">
                    <label class="col-xs-6 control-label">Document Provider</label>
                    <div class="col-xs-6">
                        <select class="form-control" ng-readonly="ctrl.readonly()==true" name="provider"
                                ng-model="ctrl.model.provider">
                            <option value="COMPANY">Company</option>
                            <option value="SUPPLIER">Supplier</option>
                            <option value="CUSTOMER">Customer</option>
                        </select>
                    </div>
                </div>

            </div>
        </div>

        <div class="row">

            <div class="col-xs-12">

                <div class="alert alert-info" ng-if="ctrl.archived()==true">
                    <div class="row">
                        <div class="col-xs-10">This document is archived.
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-xs-12 text-right">
                <input ng-if="ctrl.readonly()==false" class="btn btn-primary" type="button"
                       ng-click="ctrl.saveDocument()" value="Save"/>

                <input ng-if="ctrl.revision==false && ctrl.isFavourite()==false" class="btn btn-warning"
                       type="button"
                       ng-click="ctrl.favourite()" value="Mark as favourite"/>

                <input ng-if="ctrl.revision==false && ctrl.isFavourite()==true" class="btn btn-default"
                       type="button"
                       ng-click="ctrl.unFavourite()" value="UnMark as favourite"/>

                <input type="button" ng-if="ctrl.readonly()==false && ctrl.model.id" class="btn btn-info"
                       ng-click="ctrl.archive()" value="Archive"/>

                <input type="button" ng-if="ctrl.revision==false && ctrl.model.state == 'ARCHIVED'" class="btn btn-info"
                       ng-click="ctrl.createRevision()" value="Create New Revison"/>
            </div>
        </div>

    </form>
</div>